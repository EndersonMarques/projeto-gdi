-- Criação das Tabelas

CREATE TABLE CLIENTE ( 
    CPF VARCHAR(11), 
    NOME VARCHAR(100), 
    END_RUA VARCHAR(255), 
    END_NUM VARCHAR(12), 
    END_CEP VARCHAR(12), 
    TELEFONE_1 VARCHAR(15), 
    TELEFONE_2 VARCHAR(15), 
    CONSTRAINT PK_CLIENTE PRIMARY KEY(CPF) 
);

CREATE TABLE FESTIVAL ( 
    ID VARCHAR(3), 
    NOME VARCHAR(255), 
    CONSTRAINT PK_FESTIVAL PRIMARY KEY(ID) 
);

CREATE TABLE MUSICO ( 
    CPF VARCHAR(11), 
    NOME VARCHAR(255), 
    CONSTRAINT PK_MUSICO PRIMARY KEY(CPF) 
);

CREATE TABLE INSTRUMENTO ( 
    CADASTRO VARCHAR(12), 
    CATEGORIA VARCHAR(255), 
    NOME VARCHAR(100), 
    CONSTRAINT PK_INSTRUMENTO PRIMARY KEY(Cadastro) 
);

CREATE TABLE FUNCIONARIO ( 
    MATRICULA VARCHAR(12), 
    NOME VARCHAR(255), 
    MAT_CHEFE VARCHAR(12), 
    CONSTRAINT PK_MATRICULA PRIMARY KEY(MATRICULA), 
    CONSTRAINT FK_MAT_CHEFE FOREIGN KEY (Mat_chefe) REFERENCES Funcionario(MATRICULA) 
);

CREATE TABLE CANTOR ( 
    CPF VARCHAR(11), 
    NOME VARCHAR(255), 
    CONSTRAINT PK_CANTOR PRIMARY KEY(CPF) 
);

CREATE TABLE INGRESSO ( 
    NUM VARCHAR(12), 
    CPF_CLIENTE VARCHAR(11), 
    ID_FESTIVAL VARCHAR(12) NOT NULL, 
    CONSTRAINT PK_INGRESSO PRIMARY KEY(NUM), 
    CONSTRAINT FK_CPF_CLIENTE FOREIGN KEY (CPF_CLIENTE) REFERENCES CLIENTE(CPF), 
    CONSTRAINT FK_ID_FESTIVAL FOREIGN KEY (ID_FESTIVAL) REFERENCES FESTIVAL(ID) 
);

CREATE TABLE EQUIPE ( 
    NUM VARCHAR(12), --Discriminador / não é por que 1:1 
    CPF_CANTOR VARCHAR(11), -- CPF ARTISTA 
    CONSTRAINT PK_EQUIPE PRIMARY KEY(CPF_CANTOR), 
    CONSTRAINT FK_CPF_A FOREIGN KEY (CPF_CANTOR) REFERENCES CANTOR(CPF) 
);

CREATE TABLE SHOW ( 
    COD VARCHAR(12), 
    NOME VARCHAR(255), 
    ID_FESTIVAL VARCHAR(12), 
    DATA_HORA TIMESTAMP DEFAULT CURRENT_TIMESTAMP, 
    LOCAL_ VARCHAR(30), 
    CONSTRAINT PK_SHOW PRIMARY KEY (COD), 
    CONSTRAINT FK_ID_SHOW FOREIGN KEY (ID_FESTIVAL) REFERENCES Festival(ID) 
);

CREATE TABLE GINCANA ( 
    COD VARCHAR(12), 
    ID_FESTIVAL VARCHAR(12), 
    DATA_HORA TIMESTAMP DEFAULT CURRENT_TIMESTAMP, 
    LOCAL_ VARCHAR(30), 
    CONSTRAINT PK_GINCANA PRIMARY KEY (COD), 
    CONSTRAINT FK_ID_GINCANA FOREIGN KEY (ID_FESTIVAL) REFERENCES Festival(ID) 
);

CREATE TABLE COMPRA ( 
    CPF VARCHAR(11), 
    NUM VARCHAR(12), 
    CONSTRAINT PK_COMPRA PRIMARY KEY (NUM), 
    CONSTRAINT FK_CPF FOREIGN KEY (CPF) REFERENCES CLIENTE(CPF), 
    CONSTRAINT FK_NUM FOREIGN KEY (NUM) REFERENCES INGRESSO(NUM) 
);

CREATE TABLE TRABALHA ( 
    ID_FESTIVAL VARCHAR(12), 
    DATA_ TIMESTAMP DEFAULT CURRENT_TIMESTAMP, 
    MATRICULA_FUNC VARCHAR(12), 
    CONSTRAINT PK_TRABALHA PRIMARY KEY (ID_FESTIVAL, MATRICULA_FUNC, DATA_), 
    CONSTRAINT FK_FUNCIONARIO FOREIGN KEY (MATRICULA_FUNC) REFERENCES FUNCIONARIO(Matricula), 
    CONSTRAINT FK_FESTIVAL FOREIGN KEY (ID_FESTIVAL) REFERENCES FESTIVAL(ID) 
);

CREATE TABLE FAZ ( 
    COD_SHOW VARCHAR(12), 
    CPF_CANTOR VARCHAR(11), 
    CONSTRAINT PK_FAZ PRIMARY KEY (COD_SHOW, CPF_CANTOR), 
    CONSTRAINT FK_SHOW FOREIGN KEY (COD_SHOW) REFERENCES SHOW(COD), 
    CONSTRAINT FK_CANTOR FOREIGN KEY (CPF_CANTOR) REFERENCES CANTOR(CPF) 
);

CREATE TABLE PARTICIPA ( 
    NUM_INGRESSO VARCHAR(12), 
    COD_GINCANA VARCHAR(12), 
    CONSTRAINT PK_PARTICIPA PRIMARY KEY (NUM_INGRESSO,COD_GINCANA), 
    CONSTRAINT FK_NUM_PARTICIPA FOREIGN KEY (NUM_INGRESSO) REFERENCES COMPRA(NUM), 
    CONSTRAINT FK_COD_PARTICIPA FOREIGN KEY (COD_GINCANA) REFERENCES GINCANA(COD) 
 
);

CREATE TABLE TOCA ( 
    COD_SHOW VARCHAR(12), 
    CPF_MUSICO VARCHAR(11), 
    CAD_INST VARCHAR(12), 
    CONSTRAINT PK_TOCA PRIMARY KEY (COD_SHOW, CPF_MUSICO, CAD_INST), 
    CONSTRAINT FK_SHOW_TOCA FOREIGN KEY (COD_SHOW) REFERENCES SHOW(COD), 
    CONSTRAINT FK_MUSICO_TOCA FOREIGN KEY (CPF_MUSICO) REFERENCES MUSICO(CPF), 
    CONSTRAINT FK_INSTRUMENTO_TOCA FOREIGN KEY (CAD_INST) REFERENCES INSTRUMENTO(Cadastro) 
);

-- Fim do Script SQL

-- Tabela Cliente
-- Inserções na tabela Cliente
INSERT INTO CLIENTE (CPF, NOME, END_RUA, END_NUM, END_CEP, TELEFONE_1, TELEFONE_2)
VALUES ('12345678901', 'João da Silva', 'Rua das Flores', '123', '12345-678', '555-5555', '666-6666');

INSERT INTO CLIENTE (CPF, NOME, END_RUA, END_NUM, END_CEP, TELEFONE_1, TELEFONE_2)
VALUES ('98765432109', 'Maria Santos', 'Avenida Principal', '456', '54321-876', '777-7777', '888-8888');

INSERT INTO CLIENTE (CPF, NOME, END_RUA, END_NUM, END_CEP, TELEFONE_1, TELEFONE_2)
VALUES ('11122233344', 'Pedro Oliveira', 'Rua dos Sonhos', '789', '98765-432', '999-9999', '000-0000');

INSERT INTO CLIENTE (CPF, NOME, END_RUA, END_NUM, END_CEP, TELEFONE_1, TELEFONE_2)
VALUES ('33344455566', 'Marta Pereira', 'Rua da Praia', '101', '54321-001', '111-1111', '222-2222');

INSERT INTO CLIENTE (CPF, NOME, END_RUA, END_NUM, END_CEP, TELEFONE_1, TELEFONE_2)
VALUES ('55566677788', 'Fernando Alves', 'Avenida das Árvores', '222', '76543-210', '333-3333', '444-4444');

-- Inserções na tabela Festival
INSERT INTO FESTIVAL (ID, NOME)
VALUES ('001', 'Festival de Verão');

INSERT INTO FESTIVAL (ID, NOME)
VALUES ('002', 'Festival de Rock');

INSERT INTO FESTIVAL (ID, NOME)
VALUES ('003', 'Festival de Jazz');

-- Inserções na tabela Músico
INSERT INTO MUSICO (CPF, NOME)
VALUES ('11111111111', 'Carlos Drummond');

INSERT INTO MUSICO (CPF, NOME)
VALUES ('22222222222', 'Ana Carolina');

INSERT INTO MUSICO (CPF, NOME)
VALUES ('33333333333', 'Lucas Lima');

-- Inserções na tabela Instrumento
INSERT INTO INSTRUMENTO (CADASTRO, CATEGORIA, NOME)
VALUES ('I001', 'Corda', 'Violão');

INSERT INTO INSTRUMENTO (CADASTRO, CATEGORIA, NOME)
VALUES ('I002', 'Sopro', 'Saxofone');

-- Inserções na tabela Funcionário
INSERT INTO FUNCIONARIO (MATRICULA, NOME, MAT_CHEFE)
VALUES ('F001', 'José Silva', NULL);

INSERT INTO FUNCIONARIO (MATRICULA, NOME, MAT_CHEFE)
VALUES ('F002', 'Maria Pereira', 'F001');

INSERT INTO FUNCIONARIO (MATRICULA, NOME, MAT_CHEFE)
VALUES ('F003', 'Carlos Santos', 'F001');

-- Inserções na tabela Cantor
INSERT INTO CANTOR (CPF, NOME)
VALUES ('55555555555', 'Ricardo Fernandes');

INSERT INTO CANTOR (CPF, NOME)
VALUES ('66666666666', 'Juliana Almeida');

-- Inserções na tabela Ingresso
INSERT INTO INGRESSO (NUM, CPF_CLIENTE, ID_FESTIVAL)
VALUES ('I001', '12345678901', '001');

INSERT INTO INGRESSO (NUM, CPF_CLIENTE, ID_FESTIVAL)
VALUES ('I002', '98765432109', '002');

-- Inserções na tabela Equipe
INSERT INTO EQUIPE (NUM, CPF_CANTOR)
VALUES ('E001', '55555555555');

INSERT INTO EQUIPE (NUM, CPF_CANTOR)
VALUES ('E002', '66666666666');

-- Inserções na tabela Show
INSERT INTO SHOW (COD, NOME, ID_FESTIVAL, LOCAL_)
VALUES ('S001', 'Show de Rock', '001', 'Praça Central');

INSERT INTO SHOW (COD, NOME, ID_FESTIVAL, LOCAL_)
VALUES ('S002', 'Show de Pop', '002', 'Estádio Municipal');

-- Inserções na tabela Gincana
INSERT INTO GINCANA (COD, ID_FESTIVAL, LOCAL_)
VALUES ('G001', '003', 'Centro de Convenções');

INSERT INTO GINCANA (COD, ID_FESTIVAL, LOCAL_)
VALUES ('G002', '002', 'Praça de Alimentação');

-- Inserções na tabela COMPRA
INSERT INTO COMPRA (CPF, NUM)
VALUES ('12345678901', 'I001');

INSERT INTO COMPRA (CPF, NUM)
VALUES ('98765432109', 'I002');

-- Inserções na tabela TRABALHA
INSERT INTO TRABALHA (ID_FESTIVAL, MATRICULA_FUNC)
VALUES ('003', 'F001');

INSERT INTO TRABALHA (ID_FESTIVAL, MATRICULA_FUNC)
VALUES ('002', 'F002');

-- Fim da inserção de dados